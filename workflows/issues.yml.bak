name: Add Issue to Project & Discord Notification

on:
  issues:
    types:
      - opened

jobs:
  add-and-notify:
    runs-on: ubuntu-latest
    steps:
      # 1. Voeg het issue toe aan het project
      - name: Add issue to project
        uses: actions/add-to-project@v0.4.0
        with:
          project-url: https://github.com/Noorddam-Roleplay
          github-token: ${{ secrets.ADD_TO_PROJECT_PAT }}

      # 2. Stuur een Discord embed
      - name: Send Discord Embed
        uses: peter-evans/discord-webhook@v2
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          content: |
            {
              "username": "GitHub Bot",
              "embeds": [{
                "title": "New Issue: ${{ github.event.issue.title }}",
                "description": "${{ github.event.issue.body }}",
                "url": "${{ github.event.issue.html_url }}"
              }]
            }
